# DB-Modeler 系统设计文档

## 1. 系统概述

DB-Modeler 是一个现代化的数据库建模和管理工具，提供直观的可视化界面，支持多种主流数据库系统的建模、管理和维护工作。

### 1.1 设计目标

- 提供直观的数据库设计和建模工具
- 支持多种主流数据库系统
- 实现团队协作功能
- 确保数据安全性
- 提供高性能的操作体验

### 1.2 适用范围

- 数据库设计师
- 后端开发工程师
- 数据库管理员
- IT架构师

## 2. 系统架构

### 2.1 整体架构

采用前后端分离的现代化架构：

- **前端层**：React + TypeScript
- **后端层**：Node.js + Express
- **数据层**：支持 MySQL、PostgreSQL、SQLite、MS SQL、Oracle
- **缓存层**：Redis
- **日志系统**：Winston

### 2.2 技术栈详情

#### 2.2.1 前端技术栈

- **核心框架**：React 18
- **开发语言**：TypeScript
- **UI框架**：Ant Design 4.x
- **状态管理**：Recoil
- **路由管理**：React Router 6
- **HTTP客户端**：Axios
- **构建工具**：Vite
- **测试框架**：Vitest

#### 2.2.2 后端技术栈

- **运行环境**：Node.js
- **Web框架**：Express.js
- **ORM框架**：Sequelize
- **认证机制**：JWT
- **缓存系统**：Redis
- **日志系统**：Winston
- **API文档**：Swagger
- **测试框架**：Jest

## 3. 数据库设计

### 3.1 核心数据模型

- 用户管理
- 项目管理
- 数据库连接配置
- 数据模型定义
- 版本控制
- 团队协作

### 3.2 数据库表结构

详细的表结构设计请参考 [数据库设计文档](./database-design.md)

## 4. API 设计

### 4.1 RESTful API

遵循 RESTful 设计规范，主要包含以下资源：

- /api/auth：认证相关
- /api/projects：项目管理
- /api/databases：数据库管理
- /api/models：数据模型
- /api/teams：团队管理
- /api/version：版本控制

### 4.2 WebSocket API

用于实时协作功能：

- 模型协同编辑
- 实时通知
- 在线状态同步

## 5. 安全设计

### 5.1 认证机制

- JWT token 认证
- 刷新 token 机制
- 多因素认证支持

### 5.2 权限控制

- 基于角色的访问控制（RBAC）
- 细粒度的操作权限控制
- 数据访问权限控制

### 5.3 数据安全

- 敏感数据加密存储
- 传输层安全（TLS）
- 数据库连接信息加密

## 6. 性能设计

### 6.1 缓存策略

- Redis 缓存层
- 前端状态缓存
- 浏览器缓存策略

### 6.2 性能优化

- 数据库查询优化
- 前端资源优化
- API 响应优化

## 7. 可扩展性设计

### 7.1 模块化设计

- 插件系统
- 主题系统
- 多语言支持

### 7.2 扩展点

- 自定义数据库适配器
- 自定义验证规则
- 自定义导出格式

## 8. 监控和运维

### 8.1 日志系统

- 操作日志
- 错误日志
- 性能日志

### 8.2 监控指标

- 系统性能指标
- 业务指标
- 安全事件
