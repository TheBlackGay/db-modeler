# DB-Modeler 产品使用手册

## 1. 产品简介
DB-Modeler 是一款专业的数据库设计和管理工具，为数据库开发人员、架构师和数据建模人员提供了一个强大的可视化平台。本工具支持多种数据库类型，提供直观的界面操作，帮助用户高效地进行数据库设计和管理工作。

## 2. 功能模块说明

### 2.1 项目管理
#### 功能描述
- 项目创建：支持创建新的数据库设计项目
- 项目导入：可导入已有的数据库设计项目
- 项目列表：展示所有项目，支持搜索和筛选
- 项目详情：显示项目的基本信息和配置

#### 操作说明
1. 创建项目
   - 点击"新建项目"按钮
   - 填写项目名称、描述等基本信息
   - 选择项目所属租户
   - 点击"确认"完成创建

2. 项目列表管理
   - 支持按名称搜索
   - 可进行编辑、删除等操作
   - 点击项目卡片进入项目设计页面

### 2.2 模型设计
#### 功能描述
- 数据表管理：创建、编辑和删除数据表
- 字段设计：详细的字段属性配置
- 关系管理：表之间关系的可视化设计
- 视图管理：创建和管理数据库视图

#### 操作说明
1. 表管理
   - 通过左侧菜单进入"表设计"
   - 使用工具栏的"新建表"按钮创建表
   - 可拖拽调整表的位置
   - 双击表名进行编辑

2. 字段管理
   - 在表设计界面点击"添加字段"
   - 设置字段名称、类型、长度等属性
   - 配置主键、外键、索引等约束
   - 支持字段的排序和批量操作

3. 关系设计
   - 使用关系工具创建表间关系
   - 支持一对一、一对多、多对多关系
   - 可视化显示关系线
   - 支持关系属性的详细配置

### 2.3 数据字典
#### 功能描述
- 字段说明：维护字段的业务含义
- 命名规范：确保字段命名的一致性
- 类型映射：不同数据库类型的映射关系

#### 操作说明
1. 字典管理
   - 进入"数据字典"页面
   - 可按表格形式查看所有字段定义
   - 支持批量导入导出
   - 提供搜索和筛选功能

### 2.4 版本管理
#### 功能描述
- 版本记录：跟踪设计变更历史
- 版本比较：对比不同版本的差异
- 版本回滚：恢复到之前的版本

#### 操作说明
1. 版本操作
   - 在工具栏选择"版本管理"
   - 查看版本历史记录
   - 选择版本进行比较
   - 可以回滚到指定版本

### 2.5 代码生成
#### 功能描述
- 多语言支持：生成多种编程语言的代码
- 模板定制：自定义代码生成模板
- 批量生成：支持批量代码生成

#### 操作说明
1. 代码生成
   - 选择目标数据库类型
   - 配置生成选项
   - 选择生成模板
   - 指定输出路径
   - 执行生成操作

### 2.6 数据库配置管理

#### 概述

数据库配置管理功能允许用户在项目中管理多个数据库连接。支持 MySQL 和 PostgreSQL 数据库，提供友好的界面来添加、编辑、删除和测试数据库连接。

#### 功能特点

1. **多数据库支持**
   - MySQL 8.0+
   - PostgreSQL 12+

2. **配置管理**
   - 创建新的数据库配置
   - 编辑现有配置
   - 删除不需要的配置
   - 查看配置详情

3. **连接测试**
   - 实时验证数据库连接
   - 快速诊断连接问题
   - 显示详细的错误信息

#### 使用说明

##### 添加新配置

1. 在项目设置页面，点击"数据库配置"标签
2. 点击"添加配置"按钮
3. 填写配置信息：
   - 名称：配置的显示名称
   - 描述：可选的配置说明
   - 数据库类型：选择 MySQL 或 PostgreSQL
   - 主机：数据库服务器地址
   - 端口：数据库服务端口
   - 数据库名：要连接的数据库名称
   - 用户名：数据库用户名
   - 密码：数据库密码
4. 点击"确定"保存配置

##### 编辑配置

1. 在配置列表中找到要编辑的配置
2. 点击"编辑"按钮
3. 修改配置信息
4. 点击"确定"保存更改

##### 测试连接

1. 在配置列表中找到要测试的配置
2. 点击"测试连接"按钮
3. 等待测试结果
4. 如果连接失败，查看错误信息并进行相应调整

##### 删除配置

1. 在配置列表中找到要删除的配置
2. 点击"删除"按钮
3. 确认删除操作

#### 注意事项

1. **安全性**
   - 请使用具有适当权限的数据库用户
   - 定期更新数据库密码
   - 不要共享数据库凭据

2. **连接问题**
   - 确保数据库服务器可以访问
   - 检查防火墙设置
   - 验证数据库用户权限

3. **最佳实践**
   - 为不同环境使用不同的配置
   - 定期测试数据库连接
   - 及时更新过期的配置

### 2.7 API 接口
#### 功能描述
- 提供 RESTful 风格的 API 接口，支持项目和数据库的管理。
- 所有 API 接口均返回标准化的 JSON 格式响应。

#### 操作说明
1. **创建项目**: 使用 `POST /api/projects` 接口创建新项目。
2. **获取项目**: 使用 `GET /api/projects/{id}` 接口获取指定项目的详细信息。
3. **获取所有项目**: 使用 `GET /api/projects` 接口获取所有项目的列表。
4. **创建租户**: 使用 `POST /api/tenants` 接口创建新租户。
5. **选择租户**: 使用 `GET /api/tenants` 接口获取租户列表。

## 4. 最佳实践
1. 项目组织
   - 建议按业务模块组织表结构
   - 使用清晰的命名规范
   - 及时维护数据字典

2. 版本控制
   - 定期保存版本
   - 重要更改前创建版本备份
   - 保持版本说明的完整性

3. 团队协作
   - 统一命名规范
   - 及时同步设计变更
   - 做好版本管理

4. **API 使用**
   - 确保 API 调用遵循统一的错误处理机制。
   - 定期更新 API 文档，确保与实际接口一致。
   - 使用 Postman 或类似工具进行 API 测试。

5. **安全性**
   - 所有 API 调用应使用 HTTPS 进行加密传输。
   - 对敏感数据进行加密存储和处理。

## 5. 常见问题解答
1. Q: 如何备份设计方案？
   A: 可以使用版本管理功能创建快照，或导出项目文件保存。

2. Q: 如何处理表关系？
   A: 使用关系设计工具，可视化创建和管理表之间的关系。

3. Q: 如何自定义代码生成模板？
   A: 在代码生成器中提供了模板编辑功能，可以根据需求自定义。

## 6. 技术支持
- 问题反馈：通过 GitHub Issues 提交问题
- 功能建议：欢迎提交 Pull Request
- 文档更新：实时更新在线文档

## 7. 更新日志
请参考项目根目录下的 README.md 文件中的版本迭代记录。

## 8. 界面交互说明

### 8.1 主界面布局
```
+------------------+-------------------+------------------+
|    顶部导航栏    |                   |                  |
+------------------+-------------------+------------------+
|                  |                   |                  |
|   左侧菜单栏     |    主内容区域      |   右侧属性面板   |
|                  |                   |                  |
|   - 模型设计     |                   |                  |
|   - 数据表       |                   |                  |
|   - 实体         |                   |                  |
|   - 视图         |                   |                  |
|   - 关系图       |                   |                  |
|                  |                   |                  |
+------------------+-------------------+------------------+
|              状态栏/信息提示                           |
+-----------------------------------------------------+
```

### 8.2 交互操作说明

#### 8.2.1 鼠标操作
- **左键点击**：选择元素
- **左键双击**：
  - 表格：打开表格编辑
  - 字段：打开字段编辑
  - 关系线：打开关系属性编辑
- **右键点击**：
  - 空白处：显示上下文菜单（新建表、粘贴等）
  - 表格：显示表格操作菜单
  - 字段：显示字段操作菜单
- **拖拽操作**：
  - 拖动表格：移动表格位置
  - 拖动表格边缘：调整表格大小
  - 拖动关系线端点：创建或修改表关系

#### 8.2.2 画布操作
- **缩放**：
  - 鼠标滚轮：放大/缩小
  - Ctrl + 滚轮：快速缩放
  - 工具栏缩放按钮：精确缩放级别
- **平移**：
  - 按住空格键 + 拖动：平移画布
  - 按住鼠标中键拖动：平移画布
- **对齐**：
  - 拖动时显示对齐参考线
  - 使用工具栏对齐按钮：左对齐、右对齐等
- **选择**：
  - 框选：按住左键拖动选择多个元素
  - Ctrl + 点击：多选
  - Shift + 点击：连续选择

#### 8.2.3 键盘快捷操作
- **通用操作**
  - `Ctrl + N`：新建表
  - `Ctrl + G`：显示/隐藏网格
  - `Ctrl + M`：显示/隐藏小地图
  - `Ctrl + B`：显示/隐藏工具栏
  - `Esc`：取消当前操作
  
- **编辑操作**
  - `Delete`：删除选中元素
  - `Ctrl + X`：剪切
  - `Ctrl + C`：复制
  - `Ctrl + V`：粘贴
  - `Ctrl + Z`：撤销
  - `Ctrl + Y`：重做

- **视图操作**
  - `Ctrl + 0`：重置缩放
  - `Ctrl + 1`：适应画布
  - `Ctrl + 2`：适应选中
  - `Ctrl + [`：向左旋转
  - `Ctrl + ]`：向右旋转

### 8.3 工具栏功能

#### 8.3.1 主工具栏
```
[新建] [打开] [保存] | [撤销] [重做] | [放大] [缩小] [1:1] | [对齐] [分布] | [导出] [设置]
```
- **文件操作**：新建、打开、保存项目
- **编辑操作**：撤销、重做最近的操作
- **视图控制**：缩放、重置视图
- **对齐工具**：对齐、分布排列
- **导出选项**：导出为图片、PDF等
- **设置选项**：配置项目参数

#### 8.3.2 绘图工具栏
```
[选择] [表] [视图] [关系] | [文本] [注释] | [网格] [参考线]
```
- **选择工具**：选择和移动元素
- **创建工具**：新建表、视图、关系等
- **注释工具**：添加文本说明和注释
- **辅助工具**：显示网格和参考线

### 8.4 右键菜单

#### 8.4.1 表格右键菜单
- 编辑表
- 复制表
- 删除表
- 新建字段
- 设置主键
- 添加索引
- 导出表结构
- 生成SQL

#### 8.4.2 字段右键菜单
- 编辑字段
- 删除字段
- 设为主键
- 设为外键
- 上移/下移
- 复制字段

#### 8.4.3 关系右键菜单
- 编辑关系
- 删除关系
- 反转关系
- 关系类型设置

### 8.5 状态提示
- 左下角显示当前操作状态
- 右下角显示画布信息（缩放比例、坐标等）
- 操作时显示临时提示信息
- 错误和警告信息的醒目提示

### 8.6 辅助功能
- **小地图**：
  - 右下角显示整体视图
  - 可拖动视图框快速定位
  - 双击定位到指定区域

- **网格系统**：
  - 可调整网格大小
  - 可设置对齐到网格
  - 显示/隐藏网格线

- **智能提示**：
  - 字段类型自动补全
  - 关键字提示
  - 命名冲突检测
  - 关系创建建议

### 8.7 常见交互场景

#### 8.7.1 创建新表
1. 点击工具栏的"新建表"按钮或使用快捷键 `Ctrl + N`
2. 在画布上点击放置表
3. 输入表名和描述
4. 点击"添加字段"或使用快捷键添加字段
5. 设置字段属性（名称、类型、长度等）
6. 点击确认保存

#### 8.7.2 创建表关系
1. 选择关系工具
2. 从源表拖动到目标表
3. 选择关系类型（一对一、一对多等）
4. 配置关系属性
5. 确认创建关系

#### 8.7.3 批量操作
1. 使用框选或 Ctrl/Shift + 点击选择多个元素
2. 使用工具栏按钮或右键菜单进行操作：
   - 对齐
   - 分布
   - 复制
   - 删除
   - 移动

### 8.8 自定义设置

#### 8.8.1 界面定制
- 主题切换（明暗主题）
- 字体大小调整
- 工具栏布局
- 快捷键定制
- 视图首选项

#### 8.8.2 绘图设置
- 网格大小
- 对齐吸附
- 连接线样式
- 表格样式
- 自动布局参数
