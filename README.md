# DB-Modeler

[TOC]

DB-Modeler 是一个用于管理和操作数据库的工具，提供了用户管理、数据库管理、表设计、数据映射、表比较和逆向工程等模块。该项目旨在简化数据库管理任务，提高开发效率。

## 项目功能概述

- **用户管理模块**：提供用户的创建、读取、更新和删除（CRUD）功能，以及用户认证和授权。
- **数据库管理模块**：支持多种数据库类型的连接管理和操作。
- **表设计模块**：允许用户设计和管理数据库表结构。
- **数据映射模块**：提供数据映射的创建和管理功能。
- **表比较模块**：支持数据库表结构的比较和差异分析。
- **逆向工程模块**：从现有数据库中提取表结构。
- **API 接口**: 提供 RESTful 风格的 API 接口，支持项目和数据库的管理。

### API 使用示例

1. **创建项目**:
   ```bash
   curl -X POST http://localhost:8080/api/projects \
   -H 'Content-Type: application/json' \
   -d '{"name": "新项目", "description": "项目描述", "tenantId": "租户ID"}'
   ```

2. **获取项目**:
   ```bash
   curl -X GET http://localhost:8080/api/projects/{id}
   ```

3. **获取所有项目**:
   ```bash
   curl -X GET http://localhost:8080/api/projects
   ```

4. **创建租户**:
   ```bash
   curl -X POST http://localhost:8080/api/tenants \
   -H 'Content-Type: application/json' \
   -d '{"name": "新租户", "code": "租户代码", "description": "描述"}'
   ```

5. **选择租户**:
   ```bash
   curl -X GET http://localhost:8080/api/tenants
   ```

## 当前进度

### 已完成功能

#### 1. 项目框架搭建
- ✅ Vue 3 + TypeScript 项目初始化
- ✅ Ant Design Vue 组件库集成
- ✅ Vue Router 路由配置
- ✅ Pinia 状态管理
- ✅ API 接口封装
- ✅ 项目目录结构规划

#### 2. 用户界面
- ✅ 响应式布局实现
- ✅ 导航菜单组件
- ✅ 项目列表展示
- ✅ 基础组件封装

#### 3. 项目管理
- ✅ 项目创建功能
- ✅ 项目列表查看
- ✅ 项目基本信息编辑
- ✅ 项目删除功能

#### 4. 模型设计
- ✅ 模型设计主页面布局
- ✅ 左侧导航菜单
  - ✅ 模型列表显示
  - ✅ 模型操作菜单
- ✅ 内容区域组件
  - ✅ 首页概览
  - ✅ 表管理视图
  - ✅ 实体管理视图
  - ✅ 视图管理界面
  - ✅ 关系图显示
  - ✅ 数据字典

#### 5. 表设计功能
- ✅ 表格创建界面
- ✅ 字段管理
  - ✅ 字段添加/编辑/删除
  - ✅ 字段属性设置
- ✅ 表关系管理
  - ✅ 关系创建
  - ✅ 关系线绘制

#### 6. 数据配置
- ✅ 数据库连接配置
- ✅ 数据库类型支持
- ✅ 连接测试功能

### 进行中的功能

#### 1. 表设计增强
- 🔄 表的搜索和过滤
- 🔄 表的导入和导出
- 🔄 字段类型管理优化
- 🔄 字段约束配置

#### 2. 关系管理增强
- 🔄 关系属性设置
- 🔄 关系的导入和导出
- 🔄 关系图布局优化

#### 3. 版本控制
- 🔄 版本历史记录
- 🔄 版本比较功能
- 🔄 版本回滚功能

### 待开发功能

#### 1. 代码生成器
- ⏳ 多语言支持
- ⏳ 模板管理
- ⏳ 自定义生成规则

#### 2. 规范检查
- ⏳ 命名规范检查
- ⏳ 结构完整性检查
- ⏳ 最佳实践验证

#### 3. 协作功能
- ⏳ 多人实时编辑
- ⏳ 变更历史记录
- ⏳ 评审流程支持

### 技术债务
1. 需要优化的部分：
   - 组件代码重构，提高复用性
   - 状态管理优化，减少冗余
   - 性能优化，提高加载速度
   - 错误处理机制完善
   - 单元测试覆盖

2. 待解决的问题：
   - 大规模数据模型的性能优化
   - 复杂关系图的渲染优化
   - 协作冲突的处理机制
   - 数据一致性保证

## 迭代计划

### v0.1 (已完成)
- ✅ 后端基础框架搭建
  - Spring Boot 项目初始化
  - 数据库设计和配置
  - 基础 CRUD 功能实现
- ✅ 前端项目初始化
  - Vue 3 + TypeScript 项目搭建
  - Ant Design Vue 组件库集成
  - 项目结构规划

### v0.2 (已完成)
- ✅ 租户管理功能
  - 租户的创建、查询、更新和删除
  - 租户选择器组件
  - 租户状态管理和持久化
- ✅ 项目管理功能
  - 项目的创建、查询、更新和删除
  - 项目与租户的关联
  - 项目列表展示和管理
- ✅ 前端架构优化
  - Pinia 状态管理集成
  - HTTP 请求统一处理
  - 组件化开发
  - 响应式布局

### v0.3 (已完成)
- ✅ 项目设计页面重构
  - 新的页面布局实现
  - 顶部导航栏优化
  - 面包屑导航集成
  - 左侧垂直菜单栏
- ✅ 数据库配置管理
  - 数据库连接配置
  - 连接测试功能
  - 数据库类型支持
- ✅ 表设计功能
  - 可视化表设计器
  - 字段类型管理
  - 索引设计
  - 约束配置

### v0.4 (PDManer 功能实现)

#### 表设计器功能
- [x] 基础界面布局
  - [x] 顶部工具栏
  - [x] 左侧菜单面板
  - [x] 中心画布区域
  - [x] 右侧属性面板

- [x] 数据表管理
  - [x] 表的创建、编辑、删除
  - [x] 表名和描述的编辑
  - [ ] 表的搜索和过滤
  - [ ] 表的导入和导出

- [x] 字段管理
  - [x] 字段的添加、编辑、删除
  - [x] 字段属性设置
  - [ ] 字段类型管理
  - [ ] 默认值设置
  - [ ] 字段约束配置

- [x] 关系管理
  - [x] 表关系的创建和编辑
  - [x] 关系线的绘制
  - [ ] 关系属性设置
  - [ ] 关系的导入和导出

#### 高级功能
- [ ] 版本管理
  - [ ] 版本历史记录
  - [ ] 版本比较
  - [ ] 版本回滚

- [ ] 代码生成
  - [ ] 多种语言支持
  - [ ] 模板管理
  - [ ] 自定义生成规则

- [ ] 数据库同步
  - [ ] 结构比较
  - [ ] 同步脚本生成
  - [ ] 自动同步功能

### v0.5 (计划中)
#### 数据字典增强
- [ ] 字段标准化管理
  - [ ] 字段命名规范
  - [ ] 字段类型标准
  - [ ] 默认值规则
- [ ] 批注和文档
  - [ ] 表级别文档
  - [ ] 字段级别文档
  - [ ] 关系说明文档
- [ ] 导入导出
  - [ ] Excel 导入导出
  - [ ] Word 文档生成
  - [ ] PDF 文档生成

#### 团队协作功能
- [ ] 用户角色管理
  - [ ] 角色定义
  - [ ] 权限配置
  - [ ] 访问控制
- [ ] 变更追踪
  - [ ] 操作日志
  - [ ] 变更历史
  - [ ] 变更通知
- [ ] 评审功能
  - [ ] 评审流程
  - [ ] 评论系统
  - [ ] 审批流程

### v0.6 (计划中)
#### 高级建模功能
- [ ] ER 图设计
  - [ ] 概念模型
  - [ ] 逻辑模型
  - [ ] 物理模型
- [ ] 模型验证
  - [ ] 命名规范检查
  - [ ] 结构完整性检查
  - [ ] 关系合理性检查
- [ ] 模型转换
  - [ ] 概念模型到逻辑模型
  - [ ] 逻辑模型到物理模型
  - [ ] 不同数据库之间的转换

#### 性能优化工具
- [ ] 索引建议
  - [ ] 索引使用分析
  - [ ] 索引优化建议
  - [ ] 冗余索引检测
- [ ] 结构优化
  - [ ] 表结构分析
  - [ ] 性能瓶颈检测
  - [ ] 优化建议生成

### v0.7 (未来规划 - 智能化功能)
#### AI 辅助设计
- [ ] 自然语言转换
  - [ ] 文本描述转表结构
  - [ ] 语音命令支持
  - [ ] 智能字段推荐
- [ ] 智能优化建议
  - [ ] 表结构优化建议
  - [ ] 索引优化建议
  - [ ] 命名规范建议
- [ ] 代码智能生成
  - [ ] 业务代码生成
  - [ ] API 接口生成
  - [ ] 测试用例生成

#### 数据分析集成
- [ ] 数据可视化
  - [ ] 表关系图谱
  - [ ] 数据流向图
  - [ ] 依赖关系图
- [ ] 数据质量分析
  - [ ] 数据一致性检查
  - [ ] 冗余数据检测
  - [ ] 数据完整性验证
- [ ] 性能分析
  - [ ] 查询性能预测
  - [ ] 存储空间估算
  - [ ] 并发访问分析

### v0.8 (未来规划 - 协作增强)
#### 实时协作
- [ ] 多人协作
  - [ ] 实时编辑同步
  - [ ] 变更冲突解决
  - [ ] 协作者状态显示
- [ ] 评审工作流
  - [ ] 在线评审
  - [ ] 评审意见追踪
  - [ ] 自动通知提醒
- [ ] 版本控制增强
  - [ ] 分支管理
  - [ ] 合并请求
  - [ ] 变更历史追踪

#### 知识管理
- [ ] 设计模式库
  - [ ] 常用设计模式
  - [ ] 最佳实践模板
  - [ ] 自定义模式
- [ ] 文档管理
  - [ ] 自动文档生成
  - [ ] 文档版本控制
  - [ ] 知识库集成
- [ ] 团队资产管理
  - [ ] 命名规范库
  - [ ] SQL模板库
  - [ ] 代码片段库

### v0.9 (未来规划 - 生态集成)
#### 开发工具集成
- [ ] IDE 插件
  - [ ] VS Code 插件
  - [ ] IntelliJ 插件
  - [ ] Eclipse 插件
- [ ] CI/CD 集成
  - [ ] 自动化测试
  - [ ] 自动化部署
  - [ ] 变更追踪
- [ ] API 管理集成
  - [ ] Swagger 集成
  - [ ] Postman 集成
  - [ ] GraphQL 支持

#### 数据库生态
- [ ] 多数据库支持
  - [ ] 图数据库
  - [ ] 时序数据库
  - [ ] NoSQL 数据库
- [ ] 数据迁移工具
  - [ ] 跨库迁移
  - [ ] 增量同步
  - [ ] 数据转换
- [ ] 监控集成
  - [ ] 性能监控
  - [ ] 异常告警
  - [ ] 使用统计

### v1.0 (未来规划 - 企业级功能)
#### 安全与合规
- [ ] 安全管理
  - [ ] 细粒度权限控制
  - [ ] 审计日志
  - [ ] 敏感数据管理
- [ ] 合规支持
  - [ ] GDPR 合规
  - [ ] 数据脱敏
  - [ ] 访问控制策略
- [ ] 备份恢复
  - [ ] 自动备份
  - [ ] 版本回滚
  - [ ] 灾难恢复

#### 企业定制
- [ ] 多租户增强
  - [ ] 租户隔离
  - [ ] 资源配额
  - [ ] 计费管理
- [ ] 集成与扩展
  - [ ] SSO 集成
  - [ ] API Gateway
  - [ ] 自定义插件
- [ ] 报表与分析
  - [ ] 自定义报表
  - [ ] 使用分析
  - [ ] 趋势预测

## 创新特性与优化方向

### 1. 用户体验优化
- 更直观的可视化界面
- 更流畅的操作响应
- 更智能的辅助功能
- 更完善的快捷键支持
- 更友好的错误提示

### 2. 性能提升
- 大规模模型的处理能力
- 实时协作的响应速度
- 资源占用的优化
- 启动加载时间的优化
- 数据同步效率的提升

### 3. 功能增强
- 更强大的版本控制
- 更完善的团队协作
- 更智能的代码生成
- 更广泛的数据库支持
- 更深入的性能分析

### 4. 生态系统
- 更丰富的插件市场
- 更开放的API接口
- 更多的三方集成
- 更活跃的社区支持
- 更完善的文档体系

## 下一步计划
1. 完善模型设计页面的数据表管理功能
2. 实现字段类型管理和约束配置
3. 开发关系属性设置功能
4. 启动版本管理模块的开发
5. 编写详细的用户使用文档

## 技术栈

### 前端
- Vue 3
- TypeScript
- Ant Design Vue
- Pinia
- Vue Router
- Axios

### 后端
- Spring Boot
- Spring Security
- MyBatis-Plus
- PostgreSQL
- Redis

## 开发规范

### Git 提交规范
- feat: 新功能
- fix: 修复问题
- docs: 文档修改
- style: 代码格式修改
- refactor: 代码重构
- test: 测试用例修改
- chore: 其他修改

### 代码规范
- 使用 ESLint 进行代码检查
- 使用 Prettier 进行代码格式化
- 遵循 Vue 3 组合式 API 的最佳实践
- 保持组件的单一职责原则
- 使用 TypeScript 类型声明

## 版本规划

### v1.0.0 (2024-Q1)

#### 表设计增强
- [ ] 字段类型模板
  - [ ] 常用类型定义
  - [ ] 自定义类型支持
  - [ ] 类型映射规则
- [ ] 字段默认值
  - [ ] 常用默认值模板
  - [ ] 表达式支持
  - [ ] 函数支持
- [ ] 字段验证规则
  - [ ] 长度限制
  - [ ] 格式验证
  - [ ] 自定义规则

#### 导入导出功能
- [ ] PDManer 项目导入
- [ ] PowerDesigner 导入
- [ ] Excel 导入导出
- [ ] SQL 脚本导入导出
- [ ] Word 文档导出

#### 用户体验优化
- [ ] 快捷键支持
- [ ] 自定义主题
- [ ] 国际化
- [ ] 操作历史
- [ ] 撤销/重做

### v1.1.0 (2024-Q2)

#### 版本管理
- [ ] 版本历史记录
- [ ] 版本比较功能
- [ ] 版本回滚
- [ ] 分支管理

#### 代码生成
- [ ] 数据库脚本生成
  - [ ] 建表脚本
  - [ ] 索引脚本
  - [ ] 注释脚本
- [ ] 应用代码生成
  - [ ] Entity 类
  - [ ] Repository 层
  - [ ] Service 层
  - [ ] Controller 层
- [ ] 文档生成
  - [ ] 数据字典
  - [ ] 设计文档
  - [ ] 变更记录

#### 数据库同步
- [ ] 结构比较
- [ ] 数据比较
- [ ] 同步脚本生成
- [ ] 自动同步

### v1.2.0 (2024-Q3)

#### 团队协作
- [ ] 实时协作编辑
- [ ] 评论和讨论
- [ ] 任务管理
- [ ] 变更通知

#### 数据库优化
- [ ] 性能分析
- [ ] 索引建议
- [ ] SQL 优化建议
- [ ] 存储优化

#### 安全功能
- [ ] 细粒度权限控制
- [ ] 操作审计
- [ ] 敏感数据标记
- [ ] 数据脱敏

### v2.0.0 (2024-Q4)

#### AI 智能化
- [ ] 智能命名建议
- [ ] 结构优化建议
- [ ] 代码注释生成
- [ ] SQL 优化建议

#### 企业级功能
- [ ] 私有化部署
- [ ] 集群支持
- [ ] 备份恢复
- [ ] 监控告警

#### 生态集成
- [ ] IDE 插件
- [ ] CI/CD 集成
- [ ] 第三方工具集成
- [ ] API 文档生成

## 参与贡献

1. Fork 本仓库
2. 新建分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 提交 Pull Request

## 开源协议

本项目采用 [MIT](LICENSE) 协议开源。