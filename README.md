# DB-Modeler

DB-Modeler 是一个用于管理和操作数据库的工具，提供了用户管理、数据库管理、表设计、数据映射、表比较和逆向工程等模块。该项目旨在简化数据库管理任务，提高开发效率。

## 项目功能概述

- **用户管理模块**：提供用户的创建、读取、更新和删除（CRUD）功能，以及用户认证和授权。
- **数据库管理模块**：支持多种数据库类型的连接管理和操作。
- **表设计模块**：允许用户设计和管理数据库表结构。
- **数据映射模块**：提供数据映射的创建和管理功能。
- **表比较模块**：支持数据库表结构的比较和差异分析。
- **逆向工程模块**：从现有数据库中提取表结构。

## 项目开发内容

### 租户功能
- 实现了租户的 RESTful API 接口，支持创建、更新、删除和获取租户信息。
- 添加了 `DELETED` 状态到 `Tenant.Status` 枚举，实现软删除功能。
- 确保只有在租户处于活动状态时才能进行项目操作。

### 项目功能
- 实现了项目的 RESTful API 接口，支持创建、更新、删除和获取项目信息。
- 添加了 `DELETED` 状态到 `Project.Status` 枚举，实现软删除功能。
- 验证项目操作时租户的状态，确保租户必须是活动的。

### 错误处理
- 创建了 `DatabaseConnectionException` 类，用于更好的数据库连接错误处理。

### 设计决策
- 选择手动实现日志记录和构造函数，避免使用 Lombok 依赖。
- 实现软删除功能，便于数据管理和历史数据保留。

## 当前开发进度

### 1. 用户管理模块
- 用户 CRUD 接口已全面实现并通过测试。
- 认证接口大部分功能已实现，密码重置功能正在完善。

### 2. 数据库管理模块
- 数据库 CRUD 接口和连接测试功能已实现并通过测试。
- 连接池管理功能已实现，支持多种数据库类型。

### 3. 表设计模块
- CRUD 接口尚未测试，需进一步开发和测试。

### 4. 数据映射模块
- CRUD 接口尚未测试，需进一步开发和测试。

### 5. 表比较模块
- 接口尚未测试，需实现表结构差异比较功能。

### 6. 逆向工程模块
- 接口尚未测试，需实现从数据库提取表结构的功能。

## 下一步计划
1. 完善密码重置功能，添加邮件发送和错误处理。
2. 测试和完善表设计和数据映射模块的所有功能。
3. 实现表比较和逆向工程模块的核心功能。

## 接口开发进度

#### 表设计模块
| 功能 | 方法 | 端点 | 开发状态 | 测试状态 |
|------|------|------|----------|----------|
| 创建表设计 | POST | /api/table-designs | ✅ | ✅ |
| 获取表设计 | GET | /api/table-designs/{id} | ✅ | ✅ |
| 获取所有表设计 | GET | /api/table-designs | ✅ | ✅ |
| 更新表设计 | PUT | /api/table-designs | ✅ | ✅ |
| 删除表设计 | DELETE | /api/table-designs/{id} | ✅ | ✅ |

#### 用户模块
| 功能 | 方法 | 端点 | 开发状态 | 测试状态 |
|------|------|------|----------|----------|
| 创建用户 | POST | /api/users | ✅ | ⚠️ |
| 获取用户 | GET | /api/users/{id} | ✅ | ⚠️ |

#### 租户模块
| 功能 | 方法 | 端点 | 开发状态 | 测试状态 |
|------|------|------|----------|----------|
| 创建租户 | POST | /api/tenants | ✅ | ✅ |
| 获取租户 | GET | /api/tenants/{id} | ✅ | ✅ |
| 获取所有租户 | GET | /api/tenants | ✅ | ✅ |
| 更新租户 | PUT | /api/tenants/{id} | ✅ | ✅ |
| 删除租户 | DELETE | /api/tenants/{id} | ✅ | ✅ |

#### 项目模块
| 功能 | 方法 | 端点 | 开发状态 | 测试状态 |
|------|------|------|----------|----------|
| 创建项目 | POST | /api/projects | ✅ | ✅ |
| 获取项目 | GET | /api/projects/{id} | ✅ | ✅ |
| 获取所有项目 | GET | /api/projects | ✅ | ✅ |
| 更新项目 | PUT | /api/projects/{id} | ✅ | ✅ |
| 删除项目 | DELETE | /api/projects/{id} | ✅ | ✅ |

#### 数据库配置模块
| 功能 | 方法 | 端点 | 开发状态 | 测试状态 |
|------|------|------|----------|----------|
| 创建配置 | POST | /api/database-configs | ✅ | ⚠️ |
| 获取配置 | GET | /api/database-configs/{id} | ✅ | ⚠️ |
| 获取所有配置 | GET | /api/database-configs | ✅ | ⚠️ |
| 获取项目配置 | GET | /api/database-configs/project/{projectId} | ✅ | ⚠️ |
| 更新配置 | PUT | /api/database-configs/{id} | ✅ | ⚠️ |

### 图例说明
- ✅ 已完成
- ⚠️ 进行中
- ❌ 未开始

## 下一步计划
1. 完善密码重置功能
   - 添加邮件发送功能
   - 完善错误处理
   - 实现重置码验证

2. 测试表设计模块
   - 实现并测试所有 CRUD 操作
   - 添加表结构验证
   - 实现表关系管理

3. 测试数据映射模块
   - 实现并测试所有 CRUD 操作
   - 添加数据映射验证
   - 实现数据映射关系管理